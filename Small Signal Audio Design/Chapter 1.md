chrome-extension://efaidnbmnnnibpcajpcglclefindmkaj/https://user.faktiskt.io/rikkitikkitavi/SELF/Small%20Signal%20Audio%20Design%20(2010).pdf


# Types of amplifiers
1. voltage amplifier- Voltage in, voltage out. The most common type, and the easiest to analyze. Used for general amplification
2. Transconductance amplifier- Voltage in, current out. These can be used for ovltage control of amplifier gain, since the gain of op amps is really governed by the amount of current flowing through the feedback network. 
3. Current amplifier- current in, current out. Not really used. 
4. Transimpedance amplifier- current in, voltage out. Importantly used in virtual- earth summing amplifiers in mixing consoles. Can be achieved with a shunt resistor over the op amp. 
# Negative Feedback
Increases gain range and stability, bandwidth, increases input impedance, decreases output impedance. 
DOESN'T decrease signal to noise ratio. 
[[Simple mixer with op amps]] for more stuff here.

# Gain Structures
There's two big ways to go about this- atenuation then gain, or the reverse. If we do gain first, we avoid some potential noise problems, but we immediately kill all the headroom of our amp. The other way around could potentially introduce more noise, but allows us to keep the circuit flexible, with headroom, and we can do other things to mitigaate a little noise. Attenuation first is the way to go. 
Usually it's best to try to jump everything to normal signal levels in one go, because compounding gain stages also compound our noise. There are some ways to avoid this too, especially in some circuits, like a mic preamp, where jumping up in one go is impracticable. 

# Noise

## Color Noise
White noise is generated by electronics. It has equal power in absolute bandwidths. I.E same power in 100-200Hz as 200-300Hz. In practice this makes it sound like it has more power in higher frequencies
Pink noise has the same power in euqal fractional bandwidths. ie- same power in 100-200Hz as 200-400Hz. 
Other color noises exist but few are useful here. 

## Johnson Noise
This is noise introduced simply from resistance- not impedance, it's only tied to the real part. Capacitance and inductance don't play a role. Some inductors have enough resistance that it can be a problem- it may still apply in a real world vs ideal scenario. 
It's correlated with the square root of resistance * Temperature

## Shot Noise
Literally tied to individual electrons. Very small, but tied to the amount of current flowing. 1ma at 100ohms gives 0.26 microvolts (-129 dBu) of noise. 

## 1/*f* Noise
Flicker noise. Rises as the examined frequency falls. Result of imperfections in ddevvice construction. 

# Low Noise Op Amp Circuitry
### How To attenuate quietly
Let's say we want to attentuate by 6dB. That's half. Sounds easy- two equal resistors for a divider. But there's more to consider. 
Lets say the source impedance isn't gonna be less than 50 ohm. That's already really low, but we'll run wiht it.  Johnson noise from this is -135 dB. Max signal handling of an op amp is about +22dB, so that puts us at a max dynamic range of 157dB. That's more than enough, but it IS a limitation. 
For the resistance values- If we choose 2 1K resistors, our johnson noise is now -125dB since the efective resistance is 500 ohm. 
We've already lost 10db, and we've barely done anything. 
1k is still too low though for most audio applications. We want at least 10K input impedance. Lets choose 2 5k resistors then. Now our johnson noise is -118, so we've lost 17db of dynamic range just by making our input impedance within normal ranges. 
To get any better performance from our attentuator, our noise performance is going to become unacceptably bad. If we go to 100k, our noise jumps to -108.

The way to combat this is to buffer our signal from everything else. 
Let's add a 100k resistor between inpt and ground, and tap that to the + of a 5532 op/amp with 0 resistance negative feedback ( this makes a follower buffer) and then add the voltage divider after it with 2 500ohm resistors. The op amp now has a noise level on its own of -119, which is halved (dropping it to -125), and the resistor network itself has a Johnson noise of -128.2dB. Now our overall noise is -123dB. Which is WAY better than the -108 we got using just resistors. 


### How to amplify quietly


We need to design a +12dB (4x) amplifier. Let's assume a source resistance of 300Ohm.

The Johnson source noise from the 300Ohm is -127.4 dB. Amplifying that by 4 adds 12dB, so puts us at -115.4dB source noise. 
We'll use a 100k Pull down for the input Impedance, then need a NonInverting feedback ratio of 3:1 for the resistors (gain  = (R1+ R2)/R2). We'll choose 3k and 1k for the values.  The noise of this network comes to -105dB. 
The amplifier itself is 10.4dB more than the source itself. We need it to be quieter. 

Lets reduce the resistor values for the feedback network to reduce the johnson noise. The op amp can only drive so much, so we can't go too low. Let's keep it at ~
500 and choose 120 and 360 (480 total). Now our johnson noise is reduced to -106.1. This is only slightly better than what we had before. We need new methods. 

### Inverting quietly

For this we need an inverting amplifier with the same value resistor for the feedback network. Assuming we need 47k  input impedance. Wed immediately need a 47k feedback resistor. These high values give us a noise level of -101dB

To improve this we need to add another active stage. Let's add a buffer with a 47k input impedence, then we can add a second inverting stage with 2 1k resistors brings us down to -110, a 9db improvement. 

# Ultra low noise design with multipath amplifiers

The above are good improvements. but lets get even better. One more technique is to use multiple parallel amps and sum them. This works because the noise from each of the amplifiers is uncorrelated, so there's some destructive interference when we sum. The signal is perfectly correlated, so summing gets us +6db for every sum stage, while the noise only increases 3db. We get diminishing returns with this strategy. -3db with 2 amps, -4.7 for 3, -6 for 4, -7db with 5, etc. Ref Page 29.

In practice adding an *actual* summing amp ata the end stage introduces noise back in, and we don't need the gain increase. So we just passively average them. We use very low values for the averaging resistors so their Johnson noise is negligible. 
If we use a simple dual buffer follower with a 100k input impedance, and a 10ohm resistor on the output of each op amp connected together, the noise value is -123dB

## Low noise amplifiers
Let's try the 4x (12dB) amp again with this new tactic. We'll use the same low resistance positive feedback design we used earlier, but duplicate it in parallel (120 +360 ohm), and use 47 ohm resistors to average the signals. 
Because of the resistors in the network required to set the gain, we won't get quite the noise optimization we did with the dual buffers. In this case it's an improvement over the single amp design by 2.2 db. (unlike 3 with the parallel buffers).




